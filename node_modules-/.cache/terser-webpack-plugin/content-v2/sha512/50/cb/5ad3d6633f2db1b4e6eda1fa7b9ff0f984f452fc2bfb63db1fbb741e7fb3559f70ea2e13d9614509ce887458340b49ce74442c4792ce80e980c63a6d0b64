{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{TVtE:function(n,l,t){\"use strict\";t.r(l);var o=t(\"CcnG\"),e=t(\"mrSG\"),u=t(\"ZZ/e\"),r=t(\"Wcq6\"),i=function(){function n(n,l,t,o,e,u,i){this.plataforma=n,this.route=l,this.router=t,this.navCtrl=o,this.alertController=e,this.loadingController=u,this.http=i,this.articulos=[],this.articulosKeys=[],this.ubicacion={},this.SubUbicacion={};var a=this;r.database().ref(\"articulos\").on(\"value\",function(n){console.log(\"Entro en articulo-ubicacion a: firebase.database().ref(articulos)\"),a.articulos=[];var l={};a.contadorTotal=0,n.forEach(function(n){a.contadorTotal+=n.val().cantidad,(l=n.val()).key=n.key,a.articulos.push(l),a.articulosKeys.push(n.key)}),a.articulost=a.articulos})}return n.prototype.onInput=function(n){this.articulos=this.articulost;var l=n.target.value;l&&\"\"!=l.trim()&&(this.articulos=this.articulos.filter(function(n){return n.nombre.toLowerCase().indexOf(l.toLowerCase())>-1}))},n.prototype.Editarticulo=function(n){return e.b(this,void 0,void 0,function(){var l,t=this;return e.e(this,function(o){switch(o.label){case 0:return l=this.articulos.indexOf(n),[4,this.alertController.create({header:\"Ediar la articulo \"+n.nombre+\" !\",inputs:[{name:\"articulo\",type:\"text\",value:n.nombre,placeholder:\"Nombre de la articulo\"}],buttons:[{text:\"Cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"Edit Cancel\",n.nombre,n.key)}},{text:\"Ok\",handler:function(o){console.log(l),r.database().ref(\"articulos/\"+n.key+\"/nombre\").set(o.articulo),t.actualizaInventario(o.articulo,n.nombre),console.log(\"Edit Ok\",t.articulos)}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})},n.prototype.Createarticulo=function(){return e.b(this,void 0,void 0,function(){var n=this;return e.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:\"articulo!\",inputs:[{name:\"articulo\",type:\"text\",placeholder:\"Nombre de la articulo\"}],buttons:[{text:\"Cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"Crear Cancel\")}},{text:\"Ok\",handler:function(l){r.database().ref(\"articulos\").push({nombre:l.articulo,cantidad:0}),console.log(\"Crear Ok\",n.articulos)}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.Removearticulo=function(n){return e.b(this,void 0,void 0,function(){return e.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:\"Cuidado!\",message:\"Se <strong>eliminar\\xe1</strong> la articulo \"+n.nombre+\" !!!\",buttons:[{text:\"cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(n){console.log(\"Eliminar Cancel: blah\")}},{text:\"eliminar\",handler:function(){r.database().ref(\"articulos/\"+n.key).remove(),console.log(\"Eliminar Okay\",n.nombre,n.key)}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.actualizaInventario=function(n,l){return e.b(this,void 0,void 0,function(){var t,o=this;return e.e(this,function(u){switch(u.label){case 0:return[4,this.loadingController.create({message:\"Actualizando inventario general\"})];case 1:return[4,(t=u.sent()).present()];case 2:return u.sent(),r.database().ref(\"inventario\").once(\"value\",function(u){return e.b(o,void 0,void 0,function(){return e.e(this,function(o){switch(o.label){case 0:return[4,u.forEach(function(o){r.database().ref(\"inventario\").child(o.key).orderByChild(\"nombre\").equalTo(l).once(\"value\",function(l){l.forEach(function(l){r.database().ref(\"inventario\").child(o.key).child(l.key).child(\"nombre\").set(n),r.database().ref(\"inventario\").child(o.key).child(l.key).child(\"articulo/nombre\").set(n)}),t.dismiss()})})];case 1:return o.sent(),[2]}})})}),[2]}})})},n.prototype.ngOnInit=function(){},n}(),a=function(){return function(){}}(),c=t(\"pMnS\"),s=t(\"oBZk\"),b=t(\"Ip0R\"),h=t(\"gIcY\"),d=t(\"ZYCi\"),f=t(\"sE5F\"),p=o.nb({encapsulation:0,styles:[[\"ion-label[_ngcontent-%COMP%]{white-space:pre-wrap!important}\"]],data:{}});function m(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,14,\"ion-list\",[],null,null,null,s.fb,s.w)),o.ob(1,49152,null,0,u.N,[o.h,o.k],null,null),(n()(),o.pb(2,0,null,0,12,\"ion-item\",[],null,null,null,s.db,s.r)),o.ob(3,49152,null,0,u.G,[o.h,o.k],null,null),(n()(),o.pb(4,0,null,0,2,\"ion-label\",[],null,[[null,\"click\"]],function(n,l,t){var o=!0;return\"click\"===l&&(o=!1!==n.component.Editarticulo(n.context.$implicit)&&o),o},s.eb,s.v)),o.ob(5,49152,null,0,u.M,[o.h,o.k],null,null),(n()(),o.Gb(6,0,[\"\",\"\"])),(n()(),o.pb(7,0,null,0,3,\"ion-note\",[[\"slot\",\"end\"]],null,null,null,s.jb,s.A)),o.ob(8,49152,null,0,u.W,[o.h,o.k],null,null),(n()(),o.Gb(9,0,[\"\",\"\"])),o.Cb(10,1),(n()(),o.pb(11,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(n,l,t){var o=!0;return\"click\"===l&&(o=!1!==n.component.Removearticulo(n.context.$implicit)&&o),o},s.X,s.o)),o.ob(12,49152,null,0,u.B,[o.h,o.k],{name:[0,\"name\"]},null),(n()(),o.pb(13,0,null,0,1,\"ion-icon\",[[\"name\",\"more\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(n,l,t){var o=!0;return\"click\"===l&&(o=!1!==n.component.Editarticulo(n.context.$implicit)&&o),o},s.X,s.o)),o.ob(14,49152,null,0,u.B,[o.h,o.k],{name:[0,\"name\"]},null)],function(n,l){n(l,12,0,\"trash\"),n(l,14,0,\"more\")},function(n,l){n(l,6,0,l.context.$implicit.nombre);var t=o.Hb(l,9,0,n(l,10,0,o.zb(l.parent,0),l.context.$implicit.cantidad));n(l,9,0,t)})}function v(n){return o.Ib(0,[o.Bb(0,b.d,[o.u]),(n()(),o.pb(1,0,null,null,15,\"ion-header\",[],null,null,null,s.W,s.n)),o.ob(2,49152,null,0,u.A,[o.h,o.k],null,null),(n()(),o.pb(3,0,null,0,9,\"ion-toolbar\",[],null,null,null,s.rb,s.I)),o.ob(4,49152,null,0,u.Ab,[o.h,o.k],null,null),(n()(),o.pb(5,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,s.N,s.e)),o.ob(6,49152,null,0,u.k,[o.h,o.k],null,null),(n()(),o.pb(7,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],function(n,l,t){var e=!0;return\"click\"===l&&(e=!1!==o.zb(n,9).onClick(t)&&e),e},s.K,s.b)),o.ob(8,49152,null,0,u.f,[o.h,o.k],null,null),o.ob(9,16384,null,0,u.g,[[2,u.gb],u.Gb],null,null),(n()(),o.pb(10,0,null,0,2,\"ion-title\",[],null,null,null,s.qb,s.H)),o.ob(11,49152,null,0,u.yb,[o.h,o.k],null,null),(n()(),o.Gb(-1,0,[\"Articulos del inventario\"])),(n()(),o.pb(13,0,null,0,3,\"ion-searchbar\",[[\"animated\",\"\"]],null,[[null,\"ionChange\"],[null,\"ionBlur\"]],function(n,l,t){var e=!0,u=n.component;return\"ionBlur\"===l&&(e=!1!==o.zb(n,16)._handleBlurEvent()&&e),\"ionChange\"===l&&(e=!1!==o.zb(n,16)._handleInputEvent(t.target.value)&&e),\"ionChange\"===l&&(e=!1!==u.onInput(t)&&e),e},s.kb,s.B)),o.Db(5120,null,h.g,function(n){return[n]},[u.Mb]),o.ob(15,49152,null,0,u.ib,[o.h,o.k],{animated:[0,\"animated\"]},null),o.ob(16,16384,null,0,u.Mb,[o.k],null,null),(n()(),o.pb(17,0,null,null,9,\"ion-content\",[],null,null,null,s.T,s.k)),o.ob(18,49152,null,0,u.t,[o.h,o.k],null,null),(n()(),o.gb(16777216,null,0,1,null,m)),o.ob(20,278528,null,0,b.j,[o.O,o.L,o.s],{ngForOf:[0,\"ngForOf\"]},null),(n()(),o.pb(21,0,null,0,5,\"ion-fab\",[[\"horizontal\",\"end\"],[\"slot\",\"fixed\"],[\"vertical\",\"bottom\"]],null,null,null,s.V,s.l)),o.ob(22,49152,null,0,u.v,[o.h,o.k],{horizontal:[0,\"horizontal\"],vertical:[1,\"vertical\"]},null),(n()(),o.pb(23,0,null,0,3,\"ion-fab-button\",[],null,[[null,\"click\"]],function(n,l,t){var o=!0;return\"click\"===l&&(o=!1!==n.component.Createarticulo()&&o),o},s.U,s.m)),o.ob(24,49152,null,0,u.w,[o.h,o.k],null,null),(n()(),o.pb(25,0,null,0,1,\"ion-icon\",[[\"name\",\"add\"]],null,null,null,s.X,s.o)),o.ob(26,49152,null,0,u.B,[o.h,o.k],{name:[0,\"name\"]},null)],function(n,l){var t=l.component;n(l,15,0,\"\"),n(l,20,0,t.articulos),n(l,22,0,\"end\",\"bottom\"),n(l,26,0,\"add\")},null)}function k(n){return o.Ib(0,[(n()(),o.pb(0,0,null,null,1,\"app-articulos-ubicacion\",[],null,null,null,v,p)),o.ob(1,114688,null,0,i,[u.Ib,d.a,d.m,u.Gb,u.a,u.Eb,f.d],null,null)],function(n,l){n(l,1,0)},null)}var C=o.lb(\"app-articulos-ubicacion\",i,k,{},{},[]);t.d(l,\"ArticulosUbicacionPageModuleNgFactory\",function(){return g});var g=o.mb(a,[],function(n){return o.wb([o.xb(512,o.j,o.bb,[[8,[c.a,C]],[3,o.j],o.x]),o.xb(4608,b.m,b.l,[o.u,[2,b.t]]),o.xb(4608,h.o,h.o,[]),o.xb(4608,u.b,u.b,[o.z,o.g]),o.xb(4608,u.Fb,u.Fb,[u.b,o.j,o.q]),o.xb(4608,u.Jb,u.Jb,[u.b,o.j,o.q]),o.xb(1073742336,b.b,b.b,[]),o.xb(1073742336,h.m,h.m,[]),o.xb(1073742336,h.f,h.f,[]),o.xb(1073742336,u.Cb,u.Cb,[]),o.xb(1073742336,d.o,d.o,[[2,d.u],[2,d.m]]),o.xb(1073742336,a,a,[]),o.xb(1024,d.k,function(){return[[{path:\"\",component:i}]]},[])])})}}]);","extractedComments":[]}