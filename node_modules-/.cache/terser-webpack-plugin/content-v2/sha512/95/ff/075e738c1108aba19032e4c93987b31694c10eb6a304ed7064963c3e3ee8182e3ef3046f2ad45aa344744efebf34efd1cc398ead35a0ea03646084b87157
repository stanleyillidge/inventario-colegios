{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{L6id:function(n,l,o){\"use strict\";o.r(l);var t=o(\"CcnG\"),u=function(){return function(){}}(),e=o(\"pMnS\"),i=o(\"oBZk\"),a=o(\"ZZ/e\"),r=o(\"Ip0R\"),s=o(\"mrSG\"),c=o(\"zA0m\"),b=o(\"t8sF\"),h=o(\"Pn9U\"),p=o(\"mzSf\"),d=o(\"Wcq6\"),f=(o(\"WI49\"),function(){function n(n,l,o,t,u,e){var i=this;this.barcodeScanner=n,this.http=l,this.camera=o,this.imageResizer=t,this.file=u,this.loadingController=e,this.json=[],this.inventario=[],this.dataBase=[],this.http.get(\"../../assets/data/data.json\").subscribe(function(n){i.json=JSON.parse(n.text())},function(n){return console.log(n)}),this.http.get(\"../../assets/data/inventario-denzil-escolar-export.json\").subscribe(function(n){i.dataBase=JSON.parse(n.text())},function(n){return console.log(n)})}return n.prototype.uploadDB=function(){return s.b(this,void 0,void 0,function(){var n,l,o,t,u,e;return s.e(this,function(i){switch(i.label){case 0:return n=this,[4,this.loadingController.create({message:\"Actualizado...\"})];case 1:return[4,(l=i.sent()).present()];case 2:for(o in i.sent(),this.json)this.inventario[o]={imagen:this.json[o].Imagen,tipo:this.json[o][\"Tipo de elemento\"],etiqueta:this.json[o].Etiqueta,ingreso:this.json[o][\"Marca temporal\"],email:this.json[o][\"Direcci\\xf3n de correo electr\\xf3nico\"],nombre:this.json[o][\"Nombre del articulo\"],cantidad:this.json[o].Cantidad,disponibilidad:this.json[o][\"Disponible para su uso\"],estado:this.json[o].estado,descripcion:this.json[o][\"Descripci\\xf3n\"],observaciones:this.json[o].Observaciones,valor:this.json[o][\"Valor unitario\"],serie:this.json[o].Serie,sede:this.json[o].Sede,ubicacion:this.json[o][\"Ubicaci\\xf3n\"],subUbicacion:this.json[o][\"Sub-Ubicaci\\xf3n\"]},t=this.buscakey(this.dataBase.sedes,this.json[o].Sede),u=this.buscakey(this.dataBase.ubicaciones[t],this.json[o][\"Ubicaci\\xf3n\"]),e=this.buscakey(this.dataBase.subUbicaciones[u],this.json[o][\"Sub-Ubicaci\\xf3n\"]),null!=t&&null!=u&&null!=e||console.log(\"item\",o,\"sede\",t,\"ubicacion\",u,\"sub-ubicacion\",e),d.database().ref(\"inventario/\"+e).push(n.inventario[o]);return l.dismiss(),[2]}})})},n.prototype.descargaDB=function(){d.database().ref().once(\"value\",function(n){n.val();var l=n.toJSON(),o=\"data:text/json;charset=utf-8,\";o+=escape(JSON.stringify(l));var t=encodeURI(o);window.open(t),console.log(\"entro root\",l)})},n.prototype.buscakey=function(n,l){for(var o in n)if(Object.values(n[o]).indexOf(l)>-1)return o},n.prototype.searchFor=function(n,l){var o=[];l=this.trimString(l);for(var t=0;t<n.length;t++)for(var u in n[t])-1!=n[t][u].indexOf(l)&&(this.itemExists(o,n[t])||o.push(n[t]));return o},n.prototype.trimString=function(n){for(var l=0,o=n.length-1;l<n.length&&\" \"==n[l];)l++;for(;o>l&&\" \"==n[o];)o-=1;return n.substring(l,o+1)},n.prototype.compareObjects=function(n,l){var o=\"\";for(o in n)if(n[o]!=l[o])return!1;for(o in l)if(n[o]!=l[o])return!1;return!0},n.prototype.itemExists=function(n,l){for(var o=0;o<n.length;o++)if(this.compareObjects(n[o],l))return!0;return!1},n.prototype.update=function(){return s.b(this,void 0,void 0,function(){return s.e(this,function(n){return[2]})})},n.prototype.camara=function(){var n=this;this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(l){n.imageResizer.resize({uri:l,quality:60,width:300,height:450}).then(function(l){n.Path=l,n.file.resolveLocalFilesystemUrl(l).then(function(l){l.file(function(l){var o=new FileReader;o.onload=function(l){n.Path=l.target.result},o.readAsDataURL(l)})}).catch(function(n){console.log(n)}),console.log(\"FilePath => \",l)}).catch(function(n){return console.log(n)})},function(n){console.log(n)})},n.prototype.startUpload=function(n){d.storage().ref(\"inventario\").putString(n,\"data_url\")},n.prototype.escaner=function(){var n=this;this.barcodeScanner.scan().then(function(l){n.scanData=l,console.log(\"Barcode data\",l)}).catch(function(n){console.log(\"Error\",n)})},n.prototype.csvJSON=function(n){for(var l=n.split(\"\\n\"),o=[],t=l[0].split(\",\"),u=1;u<l.length;u++){for(var e={},i=l[u].split(\",\"),a=0;a<t.length;a++)e[t[a]]=i[a];o.push(e)}return JSON.stringify(o)},n}()),m=o(\"sE5F\"),g=t.nb({encapsulation:0,styles:[[\".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}\"]],data:{}});function k(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,15,\"ion-item\",[[\"text-wrap\",\"\"]],null,null,null,i.db,i.r)),t.ob(1,49152,null,0,a.G,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,3,\"ion-thumbnail\",[[\"slot\",\"start\"]],null,null,null,i.pb,i.G)),t.ob(3,49152,null,0,a.xb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,1,\"ion-img\",[],null,null,null,i.Y,i.p)),t.ob(5,49152,null,0,a.C,[t.h,t.k],{src:[0,\"src\"]},null),(n()(),t.pb(6,0,null,0,1,\"ion-label\",[],null,null,null,i.eb,i.v)),t.ob(7,49152,null,0,a.M,[t.h,t.k],null,null),(n()(),t.pb(8,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(n,l,o){var t=!0,u=n.component;return\"click\"===l&&(t=!1!==u.startUpload(u.Path)&&t),t},i.M,i.d)),t.ob(9,49152,null,0,a.j,[t.h,t.k],{fill:[0,\"fill\"]},null),(n()(),t.pb(10,0,null,0,1,\"ion-icon\",[[\"name\",\"cloud-upload\"],[\"slot\",\"icon-only\"]],null,null,null,i.X,i.o)),t.ob(11,49152,null,0,a.B,[t.h,t.k],{name:[0,\"name\"]},null),(n()(),t.pb(12,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],function(n,l,o){var t=!0,u=n.component;return\"click\"===l&&(t=!1!==u.deleteImage(u.img,u.pos)&&t),t},i.M,i.d)),t.ob(13,49152,null,0,a.j,[t.h,t.k],{fill:[0,\"fill\"]},null),(n()(),t.pb(14,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"icon-only\"]],null,null,null,i.X,i.o)),t.ob(15,49152,null,0,a.B,[t.h,t.k],{name:[0,\"name\"]},null)],function(n,l){n(l,5,0,l.component.Path),n(l,9,0,\"clear\"),n(l,11,0,\"cloud-upload\"),n(l,13,0,\"clear\"),n(l,15,0,\"trash\")},null)}function v(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,15,\"ion-card\",[[\"class\",\"welcome-card\"]],null,null,null,i.S,i.f)),t.ob(1,49152,null,0,a.l,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,\"ion-img\",[[\"src\",\"/assets/shapes.svg\"]],null,null,null,i.Y,i.p)),t.ob(3,49152,null,0,a.C,[t.h,t.k],{src:[0,\"src\"]},null),(n()(),t.pb(4,0,null,0,7,\"ion-card-header\",[],null,null,null,i.P,i.h)),t.ob(5,49152,null,0,a.n,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,2,\"ion-card-subtitle\",[],null,null,null,i.Q,i.i)),t.ob(7,49152,null,0,a.o,[t.h,t.k],null,null),(n()(),t.Eb(-1,0,[\"Barcode scaner\"])),(n()(),t.pb(9,0,null,0,2,\"ion-card-title\",[],null,null,null,i.R,i.j)),t.ob(10,49152,null,0,a.p,[t.h,t.k],null,null),(n()(),t.Eb(-1,0,[\"Welcome to Ionic\"])),(n()(),t.pb(12,0,null,0,3,\"ion-card-content\",[],null,null,null,i.O,i.g)),t.ob(13,49152,null,0,a.m,[t.h,t.k],null,null),(n()(),t.pb(14,0,null,0,1,\"p\",[],null,null,null,null,null)),(n()(),t.Eb(15,null,[\"\",\"\"]))],function(n,l){n(l,3,0,\"/assets/shapes.svg\")},function(n,l){n(l,15,0,l.component.scanData.text)})}function j(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,10,\"ion-header\",[],null,null,null,i.W,i.n)),t.ob(1,49152,null,0,a.A,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,8,\"ion-toolbar\",[],null,null,null,i.rb,i.I)),t.ob(3,49152,null,0,a.Ab,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,3,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,i.N,i.e)),t.ob(5,49152,null,0,a.k,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,\"ion-menu-button\",[],null,null,null,i.gb,i.y)),t.ob(7,49152,null,0,a.Q,[t.h,t.k],null,null),(n()(),t.pb(8,0,null,0,2,\"ion-title\",[],null,null,null,i.qb,i.H)),t.ob(9,49152,null,0,a.yb,[t.h,t.k],null,null),(n()(),t.Eb(-1,0,[\" Home \"])),(n()(),t.pb(11,0,null,null,22,\"ion-content\",[],null,null,null,i.T,i.k)),t.ob(12,49152,null,0,a.t,[t.h,t.k],null,null),(n()(),t.pb(13,0,null,0,6,\"ion-button\",[[\"expand\",\"block\"]],null,[[null,\"click\"]],function(n,l,o){var t=!0;return\"click\"===l&&(t=!1!==n.component.escaner()&&t),t},i.M,i.d)),t.ob(14,49152,null,0,a.j,[t.h,t.k],{expand:[0,\"expand\"]},null),(n()(),t.pb(15,0,null,0,1,\"ion-icon\",[[\"name\",\"build\"],[\"slot\",\"start\"]],null,null,null,i.X,i.o)),t.ob(16,49152,null,0,a.B,[t.h,t.k],{name:[0,\"name\"]},null),(n()(),t.pb(17,0,null,0,2,\"ion-label\",[],null,null,null,i.eb,i.v)),t.ob(18,49152,null,0,a.M,[t.h,t.k],null,null),(n()(),t.Eb(-1,0,[\"Scan QR code App\"])),(n()(),t.pb(20,0,null,0,6,\"ion-button\",[[\"expand\",\"block\"]],null,[[null,\"click\"]],function(n,l,o){var t=!0;return\"click\"===l&&(t=!1!==n.component.camara()&&t),t},i.M,i.d)),t.ob(21,49152,null,0,a.j,[t.h,t.k],{expand:[0,\"expand\"]},null),(n()(),t.pb(22,0,null,0,1,\"ion-icon\",[[\"color\",\"medium\"],[\"name\",\"build\"],[\"slot\",\"start\"]],null,null,null,i.X,i.o)),t.ob(23,49152,null,0,a.B,[t.h,t.k],{color:[0,\"color\"],name:[1,\"name\"]},null),(n()(),t.pb(24,0,null,0,2,\"ion-label\",[],null,null,null,i.eb,i.v)),t.ob(25,49152,null,0,a.M,[t.h,t.k],null,null),(n()(),t.Eb(-1,0,[\"Camara\"])),(n()(),t.pb(27,0,null,0,2,\"ion-button\",[[\"download\",\"data.json\"],[\"expand\",\"block\"],[\"href\",\"https://inventario-denzil-escolar.firebaseio.com/.json?download=dataBase.json\"],[\"target\",\"_blank\"]],null,null,null,i.M,i.d)),t.ob(28,49152,null,0,a.j,[t.h,t.k],{expand:[0,\"expand\"],href:[1,\"href\"]},null),(n()(),t.Eb(-1,0,[\"Descarga Data Base JSON\"])),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(31,16384,null,0,r.i,[t.O,t.L],{ngIf:[0,\"ngIf\"]},null),(n()(),t.gb(16777216,null,0,1,null,v)),t.ob(33,16384,null,0,r.i,[t.O,t.L],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var o=l.component;n(l,14,0,\"block\"),n(l,16,0,\"build\"),n(l,21,0,\"block\"),n(l,23,0,\"medium\",\"build\"),n(l,28,0,\"block\",\"https://inventario-denzil-escolar.firebaseio.com/.json?download=dataBase.json\"),n(l,31,0,o.Path),n(l,33,0,o.scanData)},null)}function x(n){return t.Fb(0,[(n()(),t.pb(0,0,null,null,1,\"app-home\",[],null,null,null,j,g)),t.ob(1,49152,null,0,f,[c.a,m.d,h.a,p.a,b.a,a.Eb],null,null)],null,null)}var y=t.lb(\"app-home\",f,x,{},{},[]),S=o(\"gIcY\"),w=o(\"ZYCi\");o.d(l,\"HomePageModuleNgFactory\",function(){return O});var O=t.mb(u,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[e.a,y]],[3,t.j],t.x]),t.xb(4608,r.k,r.j,[t.u,[2,r.r]]),t.xb(4608,S.o,S.o,[]),t.xb(4608,a.b,a.b,[t.z,t.g]),t.xb(4608,a.Fb,a.Fb,[a.b,t.j,t.q]),t.xb(4608,a.Jb,a.Jb,[a.b,t.j,t.q]),t.xb(1073742336,r.b,r.b,[]),t.xb(1073742336,S.m,S.m,[]),t.xb(1073742336,S.f,S.f,[]),t.xb(1073742336,a.Cb,a.Cb,[]),t.xb(1073742336,w.o,w.o,[[2,w.u],[2,w.m]]),t.xb(1073742336,u,u,[]),t.xb(1024,w.k,function(){return[[{path:\"\",component:f}]]},[])])})}}]);","extractedComments":[]}