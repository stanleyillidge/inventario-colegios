{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{yMXn:function(n,l,o){\"use strict\";o.r(l);var e=o(\"CcnG\"),t=o(\"mrSG\"),i=o(\"ZZ/e\"),u=o(\"Wcq6\"),c=(o(\"iTTW\"),function(){function n(n,l,o,e,t,i){this.route=n,this.plataforma=l,this.router=o,this.navCtrl=e,this.alertController=t,this.http=i,this.subUbicaciones=[],this.subUbicacionesKeys=[],this.ubicacion={},this.sede=[],this.contador={};var c=this;this.ubicacion.nombre=this.route.snapshot.paramMap.get(\"ubicacionNombre\"),this.ubicacion.key=this.route.snapshot.paramMap.get(\"ubicacionkey\"),this.sede.nombre=this.route.snapshot.paramMap.get(\"sedeNombre\"),this.sede.key=this.route.snapshot.paramMap.get(\"sedekey\"),this.titulo=this.sede.nombre+\" / \"+this.ubicacion.nombre,console.log(this.ubicacion),console.log(this.sede),u.database().ref(\"subUbicaciones/\"+this.ubicacion.key).on(\"value\",function(n){c.subUbicaciones=[];var l={};c.cantidad=n.numChildren(),n.forEach(function(n){(l=n.val()).key=n.key,c.subUbicaciones.push(l)}),c.subUbicacionest=c.subUbicaciones,c.contador.SubUbicacion=0,c.contador.ubicacion=0,c.contador.sede=0,u.database().ref(\"subUbicaciones/\"+c.ubicacion.key).once(\"value\",function(n){n.forEach(function(n){c.contador.ubicacion+=n.val().cantidad}),u.database().ref(\"ubicaciones/\"+c.sede.key+\"/\"+c.ubicacion.key+\"/cantidad\").set(c.contador.ubicacion),u.database().ref(\"ubicaciones/\"+c.sede.key).once(\"value\",function(n){n.forEach(function(n){c.contador.sede+=n.val().cantidad}),u.database().ref(\"sedes/\"+c.sede.key+\"/cantidad\").set(c.contador.sede)})})})}return n.prototype.onInput=function(n){this.subUbicaciones=this.subUbicacionest;var l=n.target.value;l&&\"\"!=l.trim()&&(this.subUbicaciones=this.subUbicaciones.filter(function(n){return n.nombre.toLowerCase().indexOf(l.toLowerCase())>-1}))},n.prototype.open=function(n){console.log(this.sede,this.ubicacion,n),this.navCtrl.navigateForward([\"inventario-sububicacion\",{SubUbicacionNombre:n.nombre,SubUbicacionkey:n.key,ubicacionNombre:this.ubicacion.nombre,ubicacionkey:this.ubicacion.key,sedeNombre:this.sede.nombre,sedekey:this.sede.key}])},n.prototype.EditSububicacion=function(n){return t.b(this,void 0,void 0,function(){var l,o=this;return t.e(this,function(e){switch(e.label){case 0:return l=this.subUbicaciones.indexOf(n),[4,this.alertController.create({header:\"Ediar la articulo \"+n.nombre+\" !\",inputs:[{name:\"articulo\",type:\"text\",value:n.nombre,placeholder:\"Nombre de la articulo\"}],buttons:[{text:\"Cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"Edit Cancel\")}},{text:\"Ok\",handler:function(e){return t.b(o,void 0,void 0,function(){return t.e(this,function(o){switch(o.label){case 0:return console.log(l),[4,u.functions().httpsCallable(\"EditSububicaciones\")({key:n.key,ubicacionkey:this.ubicacion.key,articulo:e.articulo}).then(function(n){console.log(\"Archivo editado: \",n)}).catch(function(n){console.log(\"Archivo editado error: \",n)})];case 1:return o.sent(),[2]}})})}}]})];case 1:return e.sent().present(),[2]}})})},n.prototype.CreateSububicacion=function(){return t.b(this,void 0,void 0,function(){var n=this;return t.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:\"subUbicacion!\",inputs:[{name:\"subUbicacion\",type:\"text\",placeholder:\"Nombre de la subUbicacion\"}],buttons:[{text:\"Cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"Crear Cancel\")}},{text:\"Ok\",handler:function(l){return t.b(n,void 0,void 0,function(){return t.e(this,function(n){switch(n.label){case 0:return[4,u.functions().httpsCallable(\"CreateSububicaciones\")({ubicacionkey:this.ubicacion.key,subUbicacion:l.subUbicacion}).then(function(n){console.log(\"Archivo editado: \",n)}).catch(function(n){console.log(\"Archivo editado error: \",n)})];case 1:return n.sent(),[2]}})})}}]})];case 1:return l.sent().present(),[2]}})})},n.prototype.RemoveSububicacion=function(n){return t.b(this,void 0,void 0,function(){var l=this;return t.e(this,function(o){switch(o.label){case 0:return[4,this.alertController.create({header:\"Cuidado!\",message:\"Se <strong>eliminar\\xe1</strong> la articulo \"+n.nombre+\" !!!\",buttons:[{text:\"cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(n){console.log(\"Eliminar Cancel: blah\")}},{text:\"eliminar\",handler:function(){return t.b(l,void 0,void 0,function(){return t.e(this,function(l){switch(l.label){case 0:return[4,u.functions().httpsCallable(\"RemoveSububicaciones\")({key:n.key,ubicacionkey:this.ubicacion.key,subUbicacion:n.nombre}).then(function(n){console.log(\"Archivo editado: \",n)}).catch(function(n){console.log(\"Archivo editado error: \",n)})];case 1:return l.sent(),[2]}})})}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})},n.prototype.ngOnInit=function(){},n}()),a=function(){return function(){}}(),b=o(\"pMnS\"),r=o(\"oBZk\"),s=o(\"Ip0R\"),h=o(\"gIcY\"),d=o(\"ZYCi\"),p=o(\"sE5F\"),f=e.nb({encapsulation:0,styles:[[\"ion-fab[_ngcontent-%COMP%]{margin:1em}ion-label[_ngcontent-%COMP%]{white-space:pre-wrap!important}ion-note[_ngcontent-%COMP%]{font-weight:800!important}\"]],data:{}});function m(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,22,\"ion-list\",[],null,null,null,r.fb,r.w)),e.ob(1,49152,null,0,i.N,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,20,\"ion-item-sliding\",[],null,null,null,r.cb,r.u)),e.ob(3,49152,null,0,i.L,[e.h,e.k],null,null),(n()(),e.pb(4,0,null,0,8,\"ion-item\",[],null,[[null,\"click\"]],function(n,l,o){var e=!0;return\"click\"===l&&(e=!1!==n.component.open(n.context.$implicit)&&e),e},r.db,r.r)),e.ob(5,49152,null,0,i.G,[e.h,e.k],null,null),(n()(),e.pb(6,0,null,0,2,\"ion-label\",[],null,null,null,r.eb,r.v)),e.ob(7,49152,null,0,i.M,[e.h,e.k],null,null),(n()(),e.Gb(8,0,[\"\",\"\"])),(n()(),e.pb(9,0,null,0,3,\"ion-note\",[[\"slot\",\"end\"]],null,null,null,r.jb,r.A)),e.ob(10,49152,null,0,i.W,[e.h,e.k],null,null),(n()(),e.Gb(11,0,[\"\",\" articulos\"])),e.Cb(12,1),(n()(),e.pb(13,0,null,0,9,\"ion-item-options\",[[\"side\",\"end\"]],null,null,null,r.bb,r.t)),e.ob(14,49152,null,0,i.K,[e.h,e.k],{side:[0,\"side\"]},null),(n()(),e.pb(15,0,null,0,3,\"ion-item-option\",[[\"color\",\"success\"]],null,[[null,\"click\"]],function(n,l,o){var e=!0;return\"click\"===l&&(e=!1!==n.component.EditSububicacion(n.context.$implicit)&&e),e},r.ab,r.s)),e.ob(16,49152,null,0,i.J,[e.h,e.k],{color:[0,\"color\"]},null),(n()(),e.pb(17,0,null,0,1,\"ion-icon\",[[\"name\",\"more\"],[\"slot\",\"end\"]],null,null,null,r.X,r.o)),e.ob(18,49152,null,0,i.B,[e.h,e.k],{name:[0,\"name\"]},null),(n()(),e.pb(19,0,null,0,3,\"ion-item-option\",[[\"color\",\"danger\"]],null,[[null,\"click\"]],function(n,l,o){var e=!0;return\"click\"===l&&(e=!1!==n.component.RemoveSububicacion(n.context.$implicit)&&e),e},r.ab,r.s)),e.ob(20,49152,null,0,i.J,[e.h,e.k],{color:[0,\"color\"]},null),(n()(),e.pb(21,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"end\"]],null,null,null,r.X,r.o)),e.ob(22,49152,null,0,i.B,[e.h,e.k],{name:[0,\"name\"]},null)],function(n,l){n(l,14,0,\"end\"),n(l,16,0,\"success\"),n(l,18,0,\"more\"),n(l,20,0,\"danger\"),n(l,22,0,\"trash\")},function(n,l){n(l,8,0,l.context.$implicit.nombre);var o=e.Hb(l,11,0,n(l,12,0,e.zb(l.parent,0),l.context.$implicit.cantidad));n(l,11,0,o)})}function k(n){return e.Ib(0,[e.Bb(0,s.d,[e.u]),(n()(),e.pb(1,0,null,null,24,\"ion-header\",[],null,null,null,r.W,r.n)),e.ob(2,49152,null,0,i.A,[e.h,e.k],null,null),(n()(),e.pb(3,0,null,0,11,\"ion-toolbar\",[],null,null,null,r.rb,r.I)),e.ob(4,49152,null,0,i.Ab,[e.h,e.k],null,null),(n()(),e.pb(5,0,null,0,6,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,r.N,r.e)),e.ob(6,49152,null,0,i.k,[e.h,e.k],null,null),(n()(),e.pb(7,0,null,0,1,\"ion-menu-button\",[],null,null,null,r.gb,r.y)),e.ob(8,49152,null,0,i.Q,[e.h,e.k],null,null),(n()(),e.pb(9,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],function(n,l,o){var t=!0;return\"click\"===l&&(t=!1!==e.zb(n,11).onClick(o)&&t),t},r.K,r.b)),e.ob(10,49152,null,0,i.f,[e.h,e.k],null,null),e.ob(11,16384,null,0,i.g,[[2,i.gb],i.Gb],null,null),(n()(),e.pb(12,0,null,0,2,\"ion-title\",[],null,null,null,r.qb,r.H)),e.ob(13,49152,null,0,i.yb,[e.h,e.k],null,null),(n()(),e.Gb(14,0,[\"\",\"\"])),(n()(),e.pb(15,0,null,0,3,\"ion-searchbar\",[[\"animated\",\"\"]],null,[[null,\"ionChange\"],[null,\"ionBlur\"]],function(n,l,o){var t=!0,i=n.component;return\"ionBlur\"===l&&(t=!1!==e.zb(n,18)._handleBlurEvent()&&t),\"ionChange\"===l&&(t=!1!==e.zb(n,18)._handleInputEvent(o.target.value)&&t),\"ionChange\"===l&&(t=!1!==i.onInput(o)&&t),t},r.kb,r.B)),e.Db(5120,null,h.g,function(n){return[n]},[i.Mb]),e.ob(17,49152,null,0,i.ib,[e.h,e.k],{animated:[0,\"animated\"]},null),e.ob(18,16384,null,0,i.Mb,[e.k],null,null),(n()(),e.pb(19,0,null,0,6,\"ion-item\",[],null,null,null,r.db,r.r)),e.ob(20,49152,null,0,i.G,[e.h,e.k],null,null),(n()(),e.pb(21,0,null,0,4,\"ion-label\",[],null,null,null,r.eb,r.v)),e.ob(22,49152,null,0,i.M,[e.h,e.k],null,null),(n()(),e.Gb(23,0,[\" Hay \",\" \",\" con \",\" articulos\"])),e.Cb(24,1),e.Cb(25,1),(n()(),e.pb(26,0,null,null,9,\"ion-content\",[],null,null,null,r.T,r.k)),e.ob(27,49152,null,0,i.t,[e.h,e.k],null,null),(n()(),e.gb(16777216,null,0,1,null,m)),e.ob(29,278528,null,0,s.i,[e.O,e.L,e.s],{ngForOf:[0,\"ngForOf\"]},null),(n()(),e.pb(30,0,null,0,5,\"ion-fab\",[[\"horizontal\",\"end\"],[\"slot\",\"fixed\"],[\"vertical\",\"bottom\"]],null,null,null,r.V,r.l)),e.ob(31,49152,null,0,i.v,[e.h,e.k],{horizontal:[0,\"horizontal\"],vertical:[1,\"vertical\"]},null),(n()(),e.pb(32,0,null,0,3,\"ion-fab-button\",[],null,[[null,\"click\"]],function(n,l,o){var e=!0;return\"click\"===l&&(e=!1!==n.component.CreateSububicacion()&&e),e},r.U,r.m)),e.ob(33,49152,null,0,i.w,[e.h,e.k],null,null),(n()(),e.pb(34,0,null,0,1,\"ion-icon\",[[\"name\",\"add\"]],null,null,null,r.X,r.o)),e.ob(35,49152,null,0,i.B,[e.h,e.k],{name:[0,\"name\"]},null)],function(n,l){var o=l.component;n(l,17,0,\"\"),n(l,29,0,o.subUbicaciones),n(l,31,0,\"end\",\"bottom\"),n(l,35,0,\"add\")},function(n,l){var o=l.component;n(l,14,0,o.titulo);var t=e.Hb(l,23,0,n(l,24,0,e.zb(l,0),o.cantidad)),i=o.ubicacion.nombre,u=e.Hb(l,23,2,n(l,25,0,e.zb(l,0),o.contador.ubicacion));n(l,23,0,t,i,u)})}function v(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,1,\"app-sub-ubicaciones\",[],null,null,null,k,f)),e.ob(1,114688,null,0,c,[d.a,i.Ib,d.m,i.Gb,i.a,p.d],null,null)],function(n,l){n(l,1,0)},null)}var g=e.lb(\"app-sub-ubicaciones\",c,v,{},{},[]);o.d(l,\"SubUbicacionesPageModuleNgFactory\",function(){return y});var y=e.mb(a,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[b.a,g]],[3,e.j],e.x]),e.xb(4608,s.l,s.k,[e.u,[2,s.s]]),e.xb(4608,h.o,h.o,[]),e.xb(4608,i.b,i.b,[e.z,e.g]),e.xb(4608,i.Fb,i.Fb,[i.b,e.j,e.q]),e.xb(4608,i.Jb,i.Jb,[i.b,e.j,e.q]),e.xb(1073742336,s.b,s.b,[]),e.xb(1073742336,h.m,h.m,[]),e.xb(1073742336,h.f,h.f,[]),e.xb(1073742336,i.Cb,i.Cb,[]),e.xb(1073742336,d.o,d.o,[[2,d.u],[2,d.m]]),e.xb(1073742336,a,a,[]),e.xb(1024,d.k,function(){return[[{path:\"\",component:c}]]},[])])})}}]);","extractedComments":[]}